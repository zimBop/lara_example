$(function(){if(!isTemplate){new WeekPicker(selectedDate).init({startDate:startDate,endDate:endDate})}$(".driver-select").on("change",function(e){let t=$(this),a=t.data("gap-id"),i=$(".driver-select[data-gap-id="+a+"]").not(this),n=t.val();n&&i.find("option[value="+n+"]").prop("disabled",!0).prop("selected",!1);let s=t.data("value");s&&n!=s&&i.find("option[value="+s+"]").prop("disabled",!1);$(this).data("value",n)}).trigger("change")});class WeekPicker{constructor(e){this.$datePicker=$("#datepicker"),this.selectedDate=e}init(e={}){let t={weekStart:1,calendarWeeks:!0,autoclose:!0,endDate:moment().add(1,"weeks").endOf("isoWeek").format("MM/DD/YYYY"),todayHighlight:!1};this.$datePicker.datepicker(Object.assign({},t,e)),this.$datePicker.datepicker("setDate",this.selectedDate),this.setEvents(),this.$datePicker.trigger("changeDate",!0)}setEvents(){let e=this;this.$datePicker.on("changeDate",function(t,a){let i=e.getMomentDate();if(e.setDateRange(i),void 0===a){let t=e.$datePicker.closest("form");t.find("input[name=year]").val()||i.year(),t.find("input[name=number]").val()||i.isoWeek();t.find("input[name=year]").val(i.year()),t.find("input[name=number]").val(i.isoWeek()),t.data("submit-on-week-change")&&t.submit()}}),this.$datePicker.on("hide",function(t){let a=e.getMomentDate();e.setDateRange(a)})}setDateRange(e){let t=this,a=e.day(1).format("MM/DD/YYYY"),i=e.day(7).format("MM/DD/YYYY");setTimeout(function(){t.$datePicker.val(a+" - "+i)},1)}getMomentDate(){return moment(this.$datePicker.datepicker("getDate"),"MM/DD/YYYY")}}
